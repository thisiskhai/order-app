{% extends "base.html" %}
{% block title %}Order Confirmation{% endblock %}

{% block content %}
<h2>📋 Order submitted at: {{ timestamp|date:"d/m/Y H:i" }}</h2>
<p>👤 Staff: <strong>{{ staff.username }}</strong></p>
<p>
  <a class="btn btn-secondary mb-4" href="{% url 'staff_order_detail' staff.id %}">
    ← Back to order list
  </a>
</p>
<form method="post">
  {% csrf_token %}
  <table class="table table-bordered mt-3">
    <thead class="table-dark">
      <tr>
        <th>Product</th>
        <th>Quantity</th>
        <th>Status</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      {% for entry in entries %}
      <tr>
        <td>{{ entry.product.name }}</td>
        <td>{{ entry.order_quantity }}</td>
        <td>
          {% if entry.is_processed %}
            <span class="badge bg-success">✅ Processed</span>
          {% else %}
            <span class="badge bg-secondary">❌ Not processed</span>
          {% endif %}
        </td>
        <td>
          <div class="form-check form-switch">
            <input 
              class="form-check-input" 
              type="checkbox" 
              id="toggle_{{ entry.id }}" 
              name="processed_{{ entry.id }}"
              {% if entry.is_processed %}checked{% endif %}
              onchange="this.form.submit()"
            >
          </div>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</form>
{% endblock %}
